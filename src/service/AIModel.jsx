// const {
//     GoogleGenerativeAI,
//     HarmCategory,
//     HarmBlockThreshold,
//   } = require("@google/generative-ai");
//   const fs = require("node:fs");
//   const mime = require("mime-types");
  import { GoogleGenerativeAI } from "@google/generative-ai";

  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseModalities: [
    ],
    responseMimeType: "application/json",
  };
  
 
   export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with\nHotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place\nDetails, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 3 days with each day plan with best\ntime to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a JSON-formatted travel plan for a couple visiting Las Vegas on a budget for 3 days, including hotel options and a suggested itinerary.  I've focused on free and low-cost activities, and affordable hotels.\n\n```json\n{\n  \"tripName\": \"Las Vegas Budget Getaway\",\n  \"duration\": \"3 Days\",\n  \"travelers\": \"Couple\",\n  \"budget\": \"Cheap\",\n  \"currency\": \"USD\",\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": 35,\n      \"hotelImageUrl\": \"https://example.com/circuscircus.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1271,\n        \"longitude\": -115.1659\n      },\n      \"rating\": 3.5,\n      \"description\": \"Affordable hotel with circus-themed attractions, Adventuredome indoor theme park (extra cost), and free circus acts.\",\n        \"amenities\":[\"Free circus acts\",\"Affordable prices\",\"Adventuredome theme park (extra cost)\"]\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": 40,\n      \"hotelImageUrl\": \"https://example.com/excalibur.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0984,\n        \"longitude\": -115.1744\n      },\n      \"rating\": 4.0,\n      \"description\": \"Medieval-themed hotel on the Strip with affordable rooms, a pool, and various dining options.\",\n        \"amenities\":[\"Medieval theme\",\"Affordable rooms\",\"Pool access\"]\n    },\n    {\n      \"hotelName\": \"Luxor Hotel & Casino\",\n      \"hotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119\",\n      \"price\": 45,\n      \"hotelImageUrl\": \"https://example.com/luxor.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0956,\n        \"longitude\": -115.1759\n      },\n      \"rating\": 4.0,\n      \"description\": \"Iconic pyramid-shaped hotel with budget-friendly rooms and various entertainment options.\",\n        \"amenities\":[\"Pyramid shape\",\"Budget-friendly\",\"Entertainment options\"]\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"The Strip & Free Attractions\",\n      \"morning\": {\n        \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n        \"placeDetails\": \"Take a classic photo at the iconic Las Vegas sign.\",\n        \"placeImageUrl\": \"https://example.com/lasvegassign.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": 36.0853,\n          \"longitude\": -115.1732\n        },\n        \"ticketPricing\": \"Free\",\n        \"timeToTravel\": \"Depends on hotel location (10-20 mins driving from the strip)\",\n        \"bestTimeToVisit\": \"Early morning (less crowded) or late evening (for the lights)\"\n      },\n      \"afternoon\": {\n        \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n        \"placeDetails\": \"Free and stunning floral displays that change seasonally.\",\n        \"placeImageUrl\": \"https://example.com/bellagio_garden.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": 36.1127,\n          \"longitude\": -115.1743\n        },\n        \"ticketPricing\": \"Free\",\n        \"timeToTravel\": \"Walking distance from many Strip hotels.\",\n        \"bestTimeToVisit\": \"Anytime, but can get crowded in the afternoon.\"\n      },\n      \"evening\": {\n        \"placeName\": \"Fountains of Bellagio\",\n        \"placeDetails\": \"Spectacular water show choreographed to music.\",\n        \"placeImageUrl\": \"https://example.com/bellagio_fountains.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": 36.1126,\n          \"longitude\": -115.1741\n        },\n        \"ticketPricing\": \"Free\",\n        \"timeToTravel\": \"Next to the Bellagio Conservatory.\",\n        \"bestTimeToVisit\": \"Any show after dark for the full effect.\"\n      }\n    },\n    \"day2\": {\n      \"theme\": \"Downtown & Value\",\n      \"morning\": {\n        \"placeName\": \"Fremont Street Experience\",\n        \"placeDetails\": \"Light show on a giant screen, street performers, and cheaper casinos.\",\n        \"placeImageUrl\": \"https://example.com/fremontstreet.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": 36.1703,\n          \"longitude\": -115.1422\n        },\n        \"ticketPricing\": \"Free (some attractions within Fremont Street cost extra)\",\n        \"timeToTravel\": \"About 15-20 minutes driving from the Strip.\",\n        \"bestTimeToVisit\": \"Evening for the Viva Vision light show.\"\n      },\n      \"afternoon\": {\n        \"placeName\": \"Gold & Silver Pawn Shop (Pawn Stars)\",\n        \"placeDetails\": \"Famous pawn shop from the TV show Pawn Stars. (Note: May involve waiting in line)\",\n        \"placeImageUrl\": \"https://example.com/pawnshop.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": 36.1732,\n          \"longitude\": -115.1419\n        },\n        \"ticketPricing\": \"Free to enter (unless you buy something!)\",\n        \"timeToTravel\": \"A short walk from Fremont Street.\",\n        \"bestTimeToVisit\": \"Mid-afternoon to avoid peak crowds\"\n      },\n      \"evening\": {\n        \"placeName\": \"Cheap Eats Downtown\",\n        \"placeDetails\": \"Explore downtown for affordable dining options.  Try pizza, burgers, or street food.\",\n        \"placeImageUrl\": \"https://example.com/cheap_eats.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": 36.1703,\n          \"longitude\": -115.1422\n        },\n        \"ticketPricing\": \"Varies, aim for $10-20 per person.\",\n        \"timeToTravel\": \"Within the Fremont Street area.\",\n        \"bestTimeToVisit\": \"Dinner time!\"\n      }\n    },\n    \"day3\": {\n      \"theme\": \"Nature & Relaxation\",\n      \"morning\": {\n        \"placeName\": \"Red Rock Canyon National Conservation Area\",\n        \"placeDetails\": \"Scenic drive and hiking trails just outside of Las Vegas. (Entrance fee applies).\",\n        \"placeImageUrl\": \"https://example.com/redrockcanyon.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": 36.1356,\n          \"longitude\": -115.4167\n        },\n        \"ticketPricing\": \"$15 per vehicle per day\",\n        \"timeToTravel\": \"About 30-45 minutes driving from the Strip.\",\n        \"bestTimeToVisit\": \"Early morning or late afternoon to avoid the heat.  Check weather conditions.\"\n      },\n      \"afternoon\": {\n        \"placeName\": \"Pool Time\",\n        \"placeDetails\": \"Relax and enjoy the pool at your hotel. Many hotels have free pool access for guests.\",\n        \"placeImageUrl\": \"https://example.com/hotelpool.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": null,\n          \"longitude\": null\n        },\n        \"ticketPricing\": \"Free (for hotel guests)\",\n        \"timeToTravel\": \"At your hotel\",\n        \"bestTimeToVisit\": \"Afternoon - before it gets too crowded\"\n      },\n      \"evening\": {\n        \"placeName\": \"Free Shows on the Strip\",\n        \"placeDetails\": \"Check for free shows like the Volcano at the Mirage or the Fall of Atlantis at Caesars Palace Forum Shops.\",\n        \"placeImageUrl\": \"https://example.com/volcano.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": null,\n          \"longitude\": null\n        },\n        \"ticketPricing\": \"Free\",\n        \"timeToTravel\": \"Depends on the show location (usually walking distance on the Strip).\",\n        \"bestTimeToVisit\": \"Evening show times. Check the show schedules online.\"\n      }\n    }\n  },\n  \"notes\": [\n    \"Wear comfortable shoes, as you'll be doing a lot of walking.\",\n    \"Stay hydrated, especially during the hotter months.\",\n    \"Take advantage of free transportation options like the Las Vegas Monorail (if staying near its route) or the free trams between some hotels.\",\n    \"Look for coupons and deals online or in tourist magazines.\",\n    \"Consider bringing your own snacks and drinks to save money.\",\n    \"Remember to tip service staff (e.g., bartenders, servers).\",\n    \"Image URLs are placeholders. Replace them with actual image URLs.\"\n  ]\n}\n```\n\nKey improvements and explanations:\n\n* **JSON Format:** The entire response is valid JSON, making it easily parsable by applications.\n* **Hotel Options:** Includes three hotels, address, price, image URL (placeholder), geo-coordinates, rating, and a helpful description highlighting budget-friendly features. I've set the prices to the lower end of what you might actually find, but be sure to check current prices.  I've also added 'amenities' to the hotel options.\n* **Detailed Itinerary:** The itinerary is broken down by day, time of day, and includes:\n    * `placeName`:  Name of the location.\n    * `placeDetails`:  A description of the location.\n    * `placeImageUrl`:  Placeholder for an image URL.  **Important:**  You MUST replace these with actual URLs.\n    * `geoCoordinates`:  Latitude and longitude for accurate mapping.\n    * `ticketPricing`:  Indicates cost (often \"Free\" for budget trips).\n    * `timeToTravel`:  Estimated travel time from a central point (like the Strip).  This will need to be adjusted based on your hotel location.\n    * `bestTimeToVisit`:  Suggests optimal times to avoid crowds or see the attraction at its best.\n* **Budget Focus:** The itinerary focuses on free or very low-cost activities.\n* **Realistic Travel Times:** I've included estimated travel times, but these are *very* approximate and depend heavily on traffic and your mode of transportation.\n* **Important Notes:** Added a \"notes\" section with crucial tips for saving money and staying comfortable.\n* **Image URLs:** All `placeImageUrl` and `hotelImageUrl` values are placeholders.  **You MUST replace these with actual image URLs from the web.**  A broken image URL will make your application look bad.  Find suitable images for each location.\n* **Geo-Coordinates:** Included for each location, allowing you to easily integrate the data with mapping services.\n* **Clear Structure:**  The JSON is well-formatted and easy to read.\n\n**How to Use This:**\n\n1.  **Replace Placeholder Image URLs:**  This is the most critical step.  Find real URLs for images of each hotel and attraction.\n2.  **Check Hotel Prices:**  The hotel prices I've provided are estimates.  Use a booking site (e.g., Booking.com, Expedia, Kayak) to check current prices and availability.  Book in advance, especially if traveling during peak season.\n3.  **Adjust Travel Times:**  Use a map application (Google Maps, etc.) to get more accurate travel times between locations, based on your hotel and transportation method.\n4.  **Consider Transportation:**  Walking is the best way to see the Strip, but distances can be long.  Consider using the bus (Deuce), the Monorail (if near its route), or ride-sharing services (Uber/Lyft).  Renting a car is only worthwhile if you plan to visit attractions far from the Strip.\n5.  **Check Show Schedules:**  Confirm the show times for the Bellagio Fountains, the Mirage Volcano, and any other free shows you want to see.  Schedules can change.\n6.  **Be Flexible:**  Vegas can be unpredictable. Be prepared to adjust your plans if necessary.\n\nThis comprehensive JSON provides a solid foundation for your Las Vegas trip planning. Good luck!\n"},
          ],
        },
      ],
    });
  
    
   
    
  